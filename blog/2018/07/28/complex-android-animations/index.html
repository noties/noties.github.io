<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Complex Android animations - Tutorial | Di's blog</title>
  <link rel="icon" sizes="32x32" type="images/png" href="/favicon-32x32.png">
  <link rel="icon" sizes="32x32" type="images/png" href="/favicon-16x16.png">
  <link rel="icon" href="/favicon.ico">
  <link rel="stylesheet" type="text/css" href="/main.css">
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/rss.xml">
  <meta name="author" content="Dimitry Ivanov">
  <meta property="og:title" content="Complex Android animations - Tutorial">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://noties.io/blog/2018/07/28/complex-android-animations/index.html">
</head>

<body>
  <header>
    <img class="avatar" src="/av.jpg" alt="Dimitry Ivanov">
    <h1 style="font-family: monospace">Complex Android animations - Tutorial</h1>
    <a class="about" href="/">by DIMITRY IVANOV</a>
  </header>
  <main>
    <div class="container">
      <div class="content">
        <p>Achieving complex animations on Android might be a daunting task. Especially when an arbitrary number of views are involved and/or they have specific ordering (one-after-another, grouping, delays, etc). Using built-in <code>ValueAnimator</code>, <code>ObjectAnimator</code>, <code>ViewPropertyAnimator</code> or <code>AnimatorSet</code> would result in untangled mess of callbacks and won't be extensible, easy to <em>tweak</em> nor maintain.</p>
        <p><img src="/assets/gif/tumbleweed/10-expand_sequential.gif" alt="gif" /></p>
        <p>This tutorial will show how to achieve complex animations in a clean and easy way in just few lines of code.</p>
        <p id="excerpt-continue"></p>
        <p>This tutorial will be using <a href="https://github.com/noties/Tumbleweed">Tumbleweed</a> library.</p>
        <blockquote class="custom tip" cite="https://github.com/noties/Tumbleweed">
          <h3>Tumbleweed</h3>
          <span> Tumbleweed is a small library that brings the power of tween animations for Android Views and Drawables. Allows easy interpolation between any possible values and has great support for combining them in sequences. Utilizes fluent API that is easy to tweak and pleasure to read. </span>
          <div style="font-size: 0.9em; margin-top: 1em;">
            <img class="icon" src="/assets/ic_github.svg" />
            <a href="https://github.com/noties/Tumbleweed">https://github.com/noties/Tumbleweed</a>
          </div>
        </blockquote>
        <p>All animations can be found in the <a href="https://github.com/noties/Tumbleweed-Tutorial">sample application</a> (head to the <a href="https://github.com/noties/Tumbleweed-Tutorial/releases">Releases tab</a> to download latest APK). It provides playback functionality and displays actual source code that was used to achieve animations</p>
        <p><img width="33%" src="/assets/images/tumbleweed-tutorial-sample-1.png" /> <img width="33%" src="/assets/images/tumbleweed-tutorial-sample-2.png" /></p>
        <h2>Basic</h2>
        <p><img src="/assets/gif/tumbleweed/01-basic.gif" alt="gif" /></p>
        <p>Simple sequential <strong>fade in</strong> of views.</p>
        <pre><code class="language-java"><span class="token class-name">Timeline</span><span class="token punctuation">.</span><span class="token function">createSequence</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token class-name">Tween</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>view1<span class="token punctuation">,</span> <span class="token class-name">Alpha</span><span class="token punctuation">.</span>VIEW<span class="token punctuation">,</span> <span class="token number">1.</span><span class="token class-name">F</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">target</span><span class="token punctuation">(</span><span class="token number">1.</span><span class="token class-name">F</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token class-name">Tween</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>view2<span class="token punctuation">,</span> <span class="token class-name">Alpha</span><span class="token punctuation">.</span>VIEW<span class="token punctuation">,</span> <span class="token number">1.</span><span class="token class-name">F</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">target</span><span class="token punctuation">(</span><span class="token number">1.</span><span class="token class-name">F</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token class-name">Tween</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>view3<span class="token punctuation">,</span> <span class="token class-name">Alpha</span><span class="token punctuation">.</span>VIEW<span class="token punctuation">,</span> <span class="token number">1.</span><span class="token class-name">F</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">target</span><span class="token punctuation">(</span><span class="token number">1.</span><span class="token class-name">F</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token class-name">Tween</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>view4<span class="token punctuation">,</span> <span class="token class-name">Alpha</span><span class="token punctuation">.</span>VIEW<span class="token punctuation">,</span> <span class="token number">1.</span><span class="token class-name">F</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">target</span><span class="token punctuation">(</span><span class="token number">1.</span><span class="token class-name">F</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token class-name">ViewTweenManager</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>tween_manager<span class="token punctuation">,</span> group<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
        <p>First, we use one of the factory methods to start configuring <em>sequential</em> <code>Timeline</code>: <code>Timeline.createSequence()</code>. Then we specify what kind of tweens to want to execute (<em>push, push, push, push!</em>). And finally triggering execution by calling <code>start</code> on supplied <code>TweenManager</code> instance.</p>
        <blockquote>
          <p><code>Timeline</code> and <code>Tween</code> are 2 base types that are used to define interpolations.</p>
        </blockquote>
        <p><code>Tween.to(...)</code> method accepts:</p>
        <ul>
          <li>a <em>target</em> (in our case a view, but it can be <em>anything</em>)</li>
          <li>a <em>tween type</em> for supplied <em>target</em> (<code>TweenType&lt;View&gt;</code> here)</li>
          <li>a duration in seconds (<code>1.F</code> == 1 second)</li>
        </ul>
        <p>Here we are using one of the predefined (bundled with library) tween types: <code>Alpha.VIEW</code>. There are quite a few of them. But what's good it's really easy to add own implementations. Generally tween types are stateless that's why library defines then as constants. The full list can be found <a href="https://github.com/noties/Tumbleweed/tree/master/tumbleweed-android/src/main/java/ru/noties/tumbleweed/android/types">here</a>.</p>
        <p>Both <code>Tween</code> and <code>Timeline</code> require a <code>TweenManager</code> to operate on. Here we are using <code>ViewTweenManager</code> that attaches to a view's drawing cycle. Using <code>ViewTweenManager.get(@IdRes int, View)</code> will ensure that there is only one <code>ViewTweenManager</code> that is attached to the specified view.</p>
        <blockquote>
          <p>There are also <code>DrawableTweenManager</code> and <code>HandlerTweenManager</code> implementations</p>
        </blockquote>
        <p>In order to reduce code size let's introduce some helper methods:</p>
        <pre><code class="language-java"><span class="token annotation punctuation">@NonNull</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">TweenDef</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">View</span><span class="token punctuation">></span></span> <span class="token function">fadeIn</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NonNull</span> <span class="token class-name">View</span> view<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Tween</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>view<span class="token punctuation">,</span> <span class="token class-name">Alpha</span><span class="token punctuation">.</span>VIEW<span class="token punctuation">,</span> <span class="token number">1.</span><span class="token class-name">F</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">target</span><span class="token punctuation">(</span><span class="token number">1.</span><span class="token class-name">F</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
        <blockquote>
          <p><code>TweenDef&lt;&gt;</code> is the type that is used to configure a <code>Tween</code>. Think of it as a <em>builder</em> of a <code>Tween</code>. All factory methods in <code>Tween</code> class return <code>TweenDef&lt;&gt;</code>: <code>to</code>, <code>from</code>, <code>set</code>, <code>call</code>, <code>mark</code>.</p>
        </blockquote>
        <pre><code class="language-java"><span class="token annotation punctuation">@NonNull</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">ViewTweenManager</span> <span class="token function">tweenManager</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NonNull</span> <span class="token class-name">View</span> view<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">ViewTweenManager</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>tween_manager<span class="token punctuation">,</span> view<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
        <p>So, now, we can re-write our <code>Basic</code> code snippet like this:</p>
        <pre><code class="language-java"><span class="token class-name">Timeline</span><span class="token punctuation">.</span><span class="token function">createSequence</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">fadeIn</span><span class="token punctuation">(</span>view1<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">fadeIn</span><span class="token punctuation">(</span>view2<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">fadeIn</span><span class="token punctuation">(</span>view3<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">fadeIn</span><span class="token punctuation">(</span>view4<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token function">tweenManager</span><span class="token punctuation">(</span>group<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
        <h2>Parallel</h2>
        <p><img src="/assets/gif/tumbleweed/02-parallel.gif" alt="gif" /></p>
        <p>Okay, let's change our animation a bit and make all views <strong>fade in</strong> simultaneously:</p>
        <pre><code class="language-java"><span class="token class-name">Timeline</span><span class="token punctuation">.</span><span class="token function">createParallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">fadeIn</span><span class="token punctuation">(</span>view1<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">fadeIn</span><span class="token punctuation">(</span>view2<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">fadeIn</span><span class="token punctuation">(</span>view3<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">fadeIn</span><span class="token punctuation">(</span>view4<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token function">tweenManager</span><span class="token punctuation">(</span>group<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
        <p>We did change only one line of code and instead of <code>Timeline.createSequence()</code> we are calling <code>Timeline.createParallel()</code>. That's it.</p>
        <p>But let's change animation duration for some views:</p>
        <p><img src="/assets/gif/tumbleweed/03-parallel.gif" alt="gif" /></p>
        <pre><code class="language-java"><span class="token class-name">Timeline</span><span class="token punctuation">.</span><span class="token function">createParallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">fadeIn</span><span class="token punctuation">(</span>view1<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">fadeIn</span><span class="token punctuation">(</span>view2<span class="token punctuation">,</span> <span class="token number">2.</span><span class="token class-name">F</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">fadeIn</span><span class="token punctuation">(</span>view3<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">fadeIn</span><span class="token punctuation">(</span>view4<span class="token punctuation">,</span> <span class="token number">3.</span><span class="token class-name">F</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token function">tweenManager</span><span class="token punctuation">(</span>group<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
        <p>Previously our helper method <code>fadeIn</code> didn't have a duration arument, let's change that:</p>
        <pre><code class="language-java"><span class="token annotation punctuation">@NonNull</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">TweenDef</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">View</span><span class="token punctuation">></span></span> <span class="token function">fadeIn</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NonNull</span> <span class="token class-name">View</span> view<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">fadeIn</span><span class="token punctuation">(</span>view<span class="token punctuation">,</span> <span class="token number">1.</span><span class="token class-name">F</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@NonNull</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">TweenDef</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">View</span><span class="token punctuation">></span></span> <span class="token function">fadeIn</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NonNull</span> <span class="token class-name">View</span> view<span class="token punctuation">,</span> <span class="token keyword">float</span> duration<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Tween</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>view<span class="token punctuation">,</span> <span class="token class-name">Alpha</span><span class="token punctuation">.</span>VIEW<span class="token punctuation">,</span> duration<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">target</span><span class="token punctuation">(</span><span class="token number">1.</span><span class="token class-name">F</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
        <h2>Grouped</h2>
        <p><img src="/assets/gif/tumbleweed/04-grouped.gif" alt="gif" /></p>
        <p>We can use <code>Timeline</code> to include other <code>Timelines</code> so can achieve <em>grouping</em> behaviour:</p>
        <pre><code class="language-java"><span class="token class-name">Timeline</span><span class="token punctuation">.</span><span class="token function">createSequence</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">fadeIn</span><span class="token punctuation">(</span>view1<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token class-name">Timeline</span><span class="token punctuation">.</span><span class="token function">createParallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">fadeIn</span><span class="token punctuation">(</span>view2<span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">fadeIn</span><span class="token punctuation">(</span>view3<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">fadeIn</span><span class="token punctuation">(</span>view4<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token function">tweenManager</span><span class="token punctuation">(</span>group<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
        <h2>All delay</h2>
        <p><img src="/assets/gif/tumbleweed/05-all_delay.gif" alt="gif" /></p>
        <p>If we want <em>postpone</em>(delay) an interpolation, we can use the <code>delay</code> option for a <code>Tween</code>:</p>
        <pre><code class="language-java"><span class="token class-name">Timeline</span><span class="token punctuation">.</span><span class="token function">createParallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">fadeIn</span><span class="token punctuation">(</span>view1<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">fadeIn</span><span class="token punctuation">(</span>view2<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">.25F</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">fadeIn</span><span class="token punctuation">(</span>view3<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">.5F</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">fadeIn</span><span class="token punctuation">(</span>view4<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">.75F</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token function">tweenManager</span><span class="token punctuation">(</span>group<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
        <blockquote class="custom warning">
          <h3>Warning</h3>
          <p>Please note that <strong>all</strong> time measurements in Tumbleweed library are using seconds, so to convert to a more common Android way (of using milliseconds) these would be:</p>
          <ul>
            <li><code>0.25F</code> -&gt; <code>250L</code></li>
            <li><code>0.5F</code> -&gt; <code>500L</code></li>
            <li><code>0.75F</code> -&gt; <code>750L</code></li>
          </ul>
        </blockquote>
        <h2>All delay repeat</h2>
        <p><img src="/assets/gif/tumbleweed/06-all_delay_repeat.gif" alt="gif" /></p>
        <p>If we want to reverse the animation after it is complete we can use <code>repeatYoyo</code> option:</p>
        <pre><code class="language-java"><span class="token class-name">Timeline</span><span class="token punctuation">.</span><span class="token function">createParallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">fadeIn</span><span class="token punctuation">(</span>view1<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">fadeIn</span><span class="token punctuation">(</span>view2<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">.25F</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">fadeIn</span><span class="token punctuation">(</span>view3<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">.5F</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">fadeIn</span><span class="token punctuation">(</span>view4<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">.75F</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">repeatYoyo</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1.</span><span class="token class-name">F</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token function">tweenManager</span><span class="token punctuation">(</span>group<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
        <p><code>repeatYoyo</code> accepts 2 arguments: <code>number-of-repetitions</code> and <code>delay</code> between repetitions. If you want an interpolation to run <em>endlessly</em> pass <code>-1</code> as the first argument (number).</p>
        <blockquote class="custom tip">
          <h3>Tip</h3>
          <p>There is also the <code>repeat</code> option for a <code>Tween</code> and it just restarts an interpolation.</p>
        </blockquote>
        <h2>Repeat individual</h2>
        <p><img src="/assets/gif/tumbleweed/07-repeat_individual.gif" alt="gif" /></p>
        <p>In previous sample we used <code>repeatYoyo</code> option for the whole <code>Timeline</code> but we can also specify <em>individual</em> repetitions for each of the <code>Tweens</code>:</p>
        <pre><code class="language-java"><span class="token class-name">Timeline</span><span class="token punctuation">.</span><span class="token function">createParallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">fadeIn</span><span class="token punctuation">(</span>view1<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">repeatYoyo</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">.25F</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">fadeIn</span><span class="token punctuation">(</span>view2<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">repeatYoyo</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">.5F</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">fadeIn</span><span class="token punctuation">(</span>view3<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">repeatYoyo</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">.75F</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">fadeIn</span><span class="token punctuation">(</span>view4<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">repeatYoyo</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1.</span><span class="token class-name">F</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token function">tweenManager</span><span class="token punctuation">(</span>group<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
        <h2>Rotation</h2>
        <p><img src="/assets/gif/tumbleweed/14-group_rotation.gif" alt="gif" /></p>
        <p>Let's create a <em>carousel</em>-like rotation animation. We will be rotating <em>group</em> View by 360 degrees clockwise and all children by 360 degrees counter-clockwise.</p>
        <pre><code class="language-java"><span class="token keyword">final</span> <span class="token keyword">float</span> rotation <span class="token operator">=</span> <span class="token number">360.</span><span class="token class-name">F</span><span class="token punctuation">;</span>

<span class="token class-name">Timeline</span><span class="token punctuation">.</span><span class="token function">createParallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">rotate</span><span class="token punctuation">(</span>group<span class="token punctuation">,</span> rotation<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">rotate</span><span class="token punctuation">(</span>view1<span class="token punctuation">,</span> <span class="token operator">-</span>rotation<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">rotate</span><span class="token punctuation">(</span>view2<span class="token punctuation">,</span> <span class="token operator">-</span>rotation<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">rotate</span><span class="token punctuation">(</span>view3<span class="token punctuation">,</span> <span class="token operator">-</span>rotation<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">rotate</span><span class="token punctuation">(</span>view4<span class="token punctuation">,</span> <span class="token operator">-</span>rotation<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">repeatYoyo</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1.</span><span class="token class-name">F</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token function">tweenManager</span><span class="token punctuation">(</span>group<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
        <p>Where <code>rotate</code> helper method:</p>
        <pre><code class="language-java"><span class="token annotation punctuation">@NonNull</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">TweenDef</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">View</span><span class="token punctuation">></span></span> <span class="token function">rotate</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NonNull</span> <span class="token class-name">View</span> view<span class="token punctuation">,</span> <span class="token keyword">float</span> rotation<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Tween</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>view<span class="token punctuation">,</span> <span class="token class-name">Rotation</span><span class="token punctuation">.</span><span class="token class-name">I</span><span class="token punctuation">,</span> <span class="token number">2.</span><span class="token class-name">F</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">target</span><span class="token punctuation">(</span>rotation<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
        <h2>Expand</h2>
        <p><img src="/assets/gif/tumbleweed/08-expand.gif" alt="gif" /></p>
        <p>Let's make all views appear from the center of the parent:</p>
        <pre><code class="language-java"><span class="token class-name">Timeline</span><span class="token punctuation">.</span><span class="token function">createParallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">translate</span><span class="token punctuation">(</span>view1<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">translate</span><span class="token punctuation">(</span>view2<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">translate</span><span class="token punctuation">(</span>view3<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">translate</span><span class="token punctuation">(</span>view4<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">repeatYoyo</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2.</span><span class="token class-name">F</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token function">tweenManager</span><span class="token punctuation">(</span>group<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
        <p>We have added another helper method <code>translate</code>:</p>
        <pre><code class="language-java"><span class="token annotation punctuation">@NonNull</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">TweenDef</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">View</span><span class="token punctuation">></span></span> <span class="token function">translate</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NonNull</span> <span class="token class-name">View</span> view<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Tween</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>view<span class="token punctuation">,</span> <span class="token class-name">Translation</span><span class="token punctuation">.</span>XY<span class="token punctuation">,</span> <span class="token number">1.</span><span class="token class-name">F</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">target</span><span class="token punctuation">(</span><span class="token number">.0F</span><span class="token punctuation">,</span> <span class="token number">.0F</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
        <p>As you can see it's animating a view into it's <em>original</em> position (0, 0). That's why before running this interpolation we must place a view in the center of the parent:</p>
        <pre><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">placeViewInCenterOf</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NonNull</span> <span class="token class-name">View</span> parent<span class="token punctuation">,</span> <span class="token annotation punctuation">@NonNull</span> <span class="token class-name">View</span> view<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">final</span> <span class="token keyword">int</span> centerX <span class="token operator">=</span> <span class="token punctuation">(</span>parent<span class="token punctuation">.</span><span class="token function">getRight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> parent<span class="token punctuation">.</span><span class="token function">getLeft</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">final</span> <span class="token keyword">int</span> centerY <span class="token operator">=</span> <span class="token punctuation">(</span>parent<span class="token punctuation">.</span><span class="token function">getBottom</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> parent<span class="token punctuation">.</span><span class="token function">getTop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>

    <span class="token keyword">final</span> <span class="token class-name">Point</span> point <span class="token operator">=</span> <span class="token class-name">ViewUtils</span><span class="token punctuation">.</span><span class="token function">relativeTo</span><span class="token punctuation">(</span>parent<span class="token punctuation">,</span> view<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">final</span> <span class="token keyword">int</span> expectedX <span class="token operator">=</span> centerX <span class="token operator">-</span> <span class="token punctuation">(</span>view<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">final</span> <span class="token keyword">int</span> expectedY <span class="token operator">=</span> centerY <span class="token operator">-</span> <span class="token punctuation">(</span>view<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    view<span class="token punctuation">.</span><span class="token function">setTranslationX</span><span class="token punctuation">(</span>expectedX <span class="token operator">-</span> point<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
    view<span class="token punctuation">.</span><span class="token function">setTranslationY</span><span class="token punctuation">(</span>expectedY <span class="token operator">-</span> point<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
        <p>And run it before starting interpolation:</p>
        <pre><code class="language-java"><span class="token function">placeViewInCenterOf</span><span class="token punctuation">(</span>group<span class="token punctuation">,</span> view1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">placeViewInCenterOf</span><span class="token punctuation">(</span>group<span class="token punctuation">,</span> view2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">placeViewInCenterOf</span><span class="token punctuation">(</span>group<span class="token punctuation">,</span> view3<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">placeViewInCenterOf</span><span class="token punctuation">(</span>group<span class="token punctuation">,</span> view4<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
        <p>To make sure that all views are measured (have width and height attributes are calculated) we will use an utility method from <code>ru.noties.tumbleweed.android.utils.ViewUtils</code>:</p>
        <pre><code class="language-java"><span class="token class-name">ViewUtils</span><span class="token punctuation">.</span><span class="token function">whenReady</span><span class="token punctuation">(</span>group<span class="token punctuation">,</span> view <span class="token operator">-></span> <span class="token punctuation">{</span>
    
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
        <p>So, the full code snippet will be:</p>
        <pre><code class="language-java"><span class="token class-name">ViewUtils</span><span class="token punctuation">.</span><span class="token function">whenReady</span><span class="token punctuation">(</span>group<span class="token punctuation">,</span> view <span class="token operator">-></span> <span class="token punctuation">{</span>

    <span class="token function">placeViewInCenterOf</span><span class="token punctuation">(</span>group<span class="token punctuation">,</span> view1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">placeViewInCenterOf</span><span class="token punctuation">(</span>group<span class="token punctuation">,</span> view2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">placeViewInCenterOf</span><span class="token punctuation">(</span>group<span class="token punctuation">,</span> view3<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">placeViewInCenterOf</span><span class="token punctuation">(</span>group<span class="token punctuation">,</span> view4<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Timeline</span><span class="token punctuation">.</span><span class="token function">createParallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">translate</span><span class="token punctuation">(</span>view1<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">translate</span><span class="token punctuation">(</span>view2<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">translate</span><span class="token punctuation">(</span>view3<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">translate</span><span class="token punctuation">(</span>view4<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">repeatYoyo</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2.</span><span class="token class-name">F</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token function">tweenManager</span><span class="token punctuation">(</span>group<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
        <h2>Expand with easing</h2>
        <p><img src="/assets/gif/tumbleweed/09-expand_easing.gif" alt="gif" /></p>
        <p>Let's add some easing to our <code>Expand</code> animation:</p>
        <pre><code class="language-java"><span class="token class-name">Timeline</span><span class="token punctuation">.</span><span class="token function">createParallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">translate</span><span class="token punctuation">(</span>view1<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ease</span><span class="token punctuation">(</span><span class="token class-name">Bounce</span><span class="token punctuation">.</span>OUT<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">translate</span><span class="token punctuation">(</span>view2<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ease</span><span class="token punctuation">(</span><span class="token class-name">Bounce</span><span class="token punctuation">.</span>OUT<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">translate</span><span class="token punctuation">(</span>view3<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ease</span><span class="token punctuation">(</span><span class="token class-name">Bounce</span><span class="token punctuation">.</span>OUT<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">translate</span><span class="token punctuation">(</span>view4<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ease</span><span class="token punctuation">(</span><span class="token class-name">Bounce</span><span class="token punctuation">.</span>OUT<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">repeatYoyo</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2.</span><span class="token class-name">F</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token function">tweenManager</span><span class="token punctuation">(</span>group<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
        <h2>Expand sequential</h2>
        <p><img src="/assets/gif/tumbleweed/10-expand_sequential.gif" alt="gif" /></p>
        <p>Let's make this: one item is animating <em>return</em> to original position whilst next one is being faded in:</p>
        <pre><code class="language-java">view1<span class="token punctuation">.</span><span class="token function">setAlpha</span><span class="token punctuation">(</span><span class="token number">.0F</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
view2<span class="token punctuation">.</span><span class="token function">setAlpha</span><span class="token punctuation">(</span><span class="token number">.0F</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
view3<span class="token punctuation">.</span><span class="token function">setAlpha</span><span class="token punctuation">(</span><span class="token number">.0F</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Timeline</span><span class="token punctuation">.</span><span class="token function">createSequence</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token class-name">Timeline</span><span class="token punctuation">.</span><span class="token function">createParallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">translate</span><span class="token punctuation">(</span>view4<span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">fadeIn</span><span class="token punctuation">(</span>view3<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token class-name">Timeline</span><span class="token punctuation">.</span><span class="token function">createParallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">translate</span><span class="token punctuation">(</span>view3<span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">fadeIn</span><span class="token punctuation">(</span>view2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token class-name">Timeline</span><span class="token punctuation">.</span><span class="token function">createParallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">translate</span><span class="token punctuation">(</span>view2<span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">fadeIn</span><span class="token punctuation">(</span>view1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">translate</span><span class="token punctuation">(</span>view1<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">repeatYoyo</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2.</span><span class="token class-name">F</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token function">tweenManager</span><span class="token punctuation">(</span>group<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
        <h2>Color</h2>
        <p><img src="/assets/gif/tumbleweed/11-color.gif" alt="gif" /></p>
        <p>Let's interpolate <strong>colors</strong>. For simplicity we will <em>swap</em> colors of views.</p>
        <pre><code class="language-java"><span class="token class-name">Timeline</span><span class="token punctuation">.</span><span class="token function">createSequence</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token class-name">Timeline</span><span class="token punctuation">.</span><span class="token function">createParallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">color</span><span class="token punctuation">(</span>view1<span class="token punctuation">,</span> color2<span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">color</span><span class="token punctuation">(</span>view2<span class="token punctuation">,</span> color1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token class-name">Timeline</span><span class="token punctuation">.</span><span class="token function">createParallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">color</span><span class="token punctuation">(</span>view3<span class="token punctuation">,</span> color4<span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">color</span><span class="token punctuation">(</span>view4<span class="token punctuation">,</span> color3<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">repeatYoyo</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1.</span><span class="token class-name">F</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token function">tweenManager</span><span class="token punctuation">(</span>group<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
        <p>Where <code>color</code> helper method:</p>
        <pre><code class="language-java"><span class="token annotation punctuation">@NonNull</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">TweenDef</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">View</span><span class="token punctuation">></span></span> <span class="token function">color</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NonNull</span> <span class="token class-name">View</span> view<span class="token punctuation">,</span> <span class="token annotation punctuation">@ColorInt</span> <span class="token keyword">int</span> color<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Tween</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>view<span class="token punctuation">,</span> <span class="token class-name">Argb</span><span class="token punctuation">.</span>BACKGROUND<span class="token punctuation">,</span> <span class="token number">1.</span><span class="token class-name">F</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">target</span><span class="token punctuation">(</span><span class="token class-name">Argb</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
        <blockquote class="custom warning">
          <h3>Warning</h3>
          <p><code>Argb.BACKGROUND</code> has one limitation: <code>target</code> value must a float array representing a color in a specific way. Please use <code>Argb.toArray(color)</code> method to construct such an array.</p>
        </blockquote>
        <h2>Text</h2>
        <p><img src="/assets/gif/tumbleweed/12-text.gif" alt="gif" /></p>
        <p>The great thing about Tumbleweed is the ability to interpolate anything, it is not tight to UI widgets. So let's interpolate some <strong>text</strong>:</p>
        <pre><code class="language-java"><span class="token class-name">Timeline</span><span class="token punctuation">.</span><span class="token function">createSequence</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">text</span><span class="token punctuation">(</span>text1<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">text</span><span class="token punctuation">(</span>text2<span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">text</span><span class="token punctuation">(</span>text3<span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">text</span><span class="token punctuation">(</span>text4<span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">repeatYoyo</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1.</span><span class="token class-name">F</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token function">tweenManager</span><span class="token punctuation">(</span>group<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
        <p>Where <code>text</code> helper method:</p>
        <pre><code class="language-java"><span class="token annotation punctuation">@NonNull</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">TweenDef</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TextView</span><span class="token punctuation">></span></span> <span class="token function">text</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NonNull</span> <span class="token class-name">TextView</span> textView<span class="token punctuation">,</span> <span class="token keyword">int</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Tween</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>textView<span class="token punctuation">,</span> <span class="token class-name">TextType</span><span class="token punctuation">.</span><span class="token class-name">I</span><span class="token punctuation">,</span> <span class="token number">1.</span><span class="token class-name">F</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">target</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
        <p>Note the <code>TextType.I</code> argument. It is not bundled with the library but defined in our code, it looks like this:</p>
        <pre><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">TextType</span> <span class="token keyword">implements</span> <span class="token class-name">TweenType</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TextView</span><span class="token punctuation">></span></span> <span class="token punctuation">{</span>

    <span class="token comment">// as this class is stateless we can reuse it's instance</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">TextType</span> <span class="token class-name">I</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TextType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getValuesSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// number of properties we interpolate</span>
        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getValues</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NonNull</span> <span class="token class-name">TextView</span> textView<span class="token punctuation">,</span> <span class="token annotation punctuation">@NonNull</span> <span class="token keyword">float</span><span class="token punctuation">[</span><span class="token punctuation">]</span> values<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        values<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>textView<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setValues</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NonNull</span> <span class="token class-name">TextView</span> textView<span class="token punctuation">,</span> <span class="token annotation punctuation">@NonNull</span> <span class="token keyword">float</span><span class="token punctuation">[</span><span class="token punctuation">]</span> values<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">final</span> <span class="token keyword">int</span> value <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>values<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">.5F</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        textView<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
        <h2>Conclusion</h2>
        <p>Of cause this is just scratching the surface of complex Android animations. And it's primary focus is <em>view</em> animations. But <a href="https://github.com/noties/Tumbleweed">Tumbleweed</a> can do much-much more. For example, interpolating some properties of a Drawable. There are a lot of samples in the main repository in the sample application. So if you feel interested you can check the source code out.</p>
        <p><img src="https://raw.githubusercontent.com/noties/Tumbleweed/master/art/drawable.gif" alt="drawables" /></p>
      </div>
      <div class="post-date">
        <em>Saturday, July 28, 2018</em>
      </div>
      <hr style="height: 0.1em;" />
      <div class="post-navigation">
        <div class="post-navigation-item previous-page">
          <span class="post-navigation-symbol">&lt; Previous</span>
          <a href="/blog/2018/03/24/local-maven-repo/index.html">Local Maven repository</a>
        </div>
        <div class="post-navigation-item next-page">
          <span class="post-navigation-symbol">Next &gt;</span>
          <a href="/blog/2018/09/10/we-have-everything/index.html">We have everything</a>
        </div>
      </div>
    </div>
    <div class="discuss" style="margin-top: 3em;">
      <script src="https://utteranc.es/client.js" repo="noties/noties.github.io" issue-term="pathname" label="discuss" theme="github-light" crossorigin="anonymous" async>
      </script>
    </div>
  </main>
  <footer>
    <div class="footer-content">
      <div style="margin-bottom: 1em;">&copy; Dimitry Ivanov</div>
      <div class="footer-ref"><svg viewBox="0 0 16 16" width="16px" height="16px" xmlns="http://www.w3.org/2000/svg">
          <path class="svg-path" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z" /></svg> <a href="https://github.com/noties">github.com/noties</a></div>
      <div class="footer-ref"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16px" height="16px">
          <path id="path28_1_" d="M 6.54 21.559 L 6.54 8.66 L 2.253 8.66 L 2.253 21.559 L 6.54 21.559 Z M 4.398 6.898 C 5.892 6.898 6.823 5.908 6.823 4.67 C 6.795 3.404 5.892 2.441 4.426 2.441 C 2.959 2.441 2 3.404 2 4.67 C 2 5.908 2.93 6.898 4.369 6.898 L 4.398 6.898 Z" class="svg-path" stroke-width="0.123663656" />
          <path id="path30_1_" d="M 8.913 21.559 L 13.201 21.559 L 13.201 14.355 C 13.201 13.97 13.229 13.584 13.342 13.309 C 13.651 12.538 14.357 11.741 15.541 11.741 C 17.093 11.741 17.713 12.924 17.713 14.658 L 17.713 21.559 L 22 21.559 L 22 14.162 C 22 10.2 19.885 8.357 17.064 8.357 C 14.752 8.357 13.736 9.649 13.172 10.53 L 13.201 10.53 L 13.201 8.66 L 8.913 8.66 C 8.97 9.87 8.913 21.559 8.913 21.559 Z" class="svg-path" stroke-width="0.123663656" />
        </svg> <a href="https://linkedin.com/in/dimitryivanov">linkedin.com/in/dimitryivanov</a></div>
      <div class="footer-ref"><svg fill="#828282" height="16" viewBox="0 0 24 24" width="16" xmlns="http://www.w3.org/2000/svg">
          <path class="svg-path" d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z" />
          <path d="M0 0h24v24H0z" fill="none" />
        </svg> <a href="mailto:di@noties.io">di@noties.io</a></div>
    </div>
  </footer>
  <script>
const videos = document.querySelectorAll('video');
if (videos && videos.length > 0) {
  // https://stackoverflow.com/a/7557433/6745174
  const isElementInViewPort = (element) => {
    const rect = element.getBoundingClientRect();
    const viewPort = {
      left: 0,
      top: 0,
      right: (window.innerWidth || document.documentElement.clientWidth),
      bottom: (window.innerHeight || document.documentElement.clientHeight)
    }
    console.log(element, rect, viewPort);
    // we should look for overlapping, so if a part is visible in view-port, we
    // consider element to be also visible
    return (
      (rect.left < viewPort.right) && (viewPort.left < rect.right) && (rect.top < viewPort.bottom) && (viewPort.top < rect.bottom));
  };
  const isPlaying = (element) => {
    return (element.currentTime > 0 && !element.paused && !element.ended);
  };
  const handler = (event) => {
    for (video of videos) {
      if (isPlaying(video) && !isElementInViewPort(video)) {
        video.pause()
      }
    }
  };
  window.addEventListener('DOMContentLoaded', handler);
  window.addEventListener('load', handler);
  window.addEventListener('resize', handler);
  window.addEventListener('scroll', handler);
}
  </script>
</body>

</html>